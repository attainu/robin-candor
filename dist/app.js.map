{"version":3,"sources":["../src/app.js"],"names":["dotenv","config","handlebars","registerHelper","process","env","NODE_ENV","date_before","dateUTC","Date","curr_date","diff","seconds","parseInt","minutes","hours","days","mongoose","connect","mongo_uri","useFindAndModify","useNewUrlParser","useUnifiedTopology","useCreateIndex","then","console","log","err","app","set","path","join","__dirname","use","express","json","urlencoded","extended","homeRouter","usersRouter","postRouter","req","res","next","locals","message","error","get","status","render","module","exports"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAuDA;;AACA;;AACA;;AAxDAA,mBAAOC,MAAP;;AAEAC,gBAAWC,cAAX,CAA0B,KAA1B,EAAgC,YAAI;AAChC,MAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA5B,EAAyC;AACrC,WAAO,uBAAP;AACH,GAFD,MAEK;AACD,WAAO,kCAAP;AACH;AACJ,CAND;;AAOAJ,gBAAWC,cAAX,CAA0B,WAA1B,EAAuC,UAASI,WAAT,EAAsB;AAEzD,MAAIC,OAAO,GAAG,IAAIC,IAAJ,CAASF,WAAT,CAAd;AACA,MAAIG,SAAS,GAAC,IAAID,IAAJ,EAAd;AACA,MAAIE,IAAI,GAAED,SAAS,GAACF,OAApB;AAEA,MAAKI,OAAO,GAAGC,QAAQ,CAACF,IAAI,GAAG,IAAR,CAAvB;AACA,MAAIG,OAAO,GAAGD,QAAQ,CAACD,OAAO,GAAG,EAAX,CAAtB;AACA,MAAIG,KAAK,GAAGF,QAAQ,CAACC,OAAO,GAAG,EAAX,CAApB;AACA,MAAIE,IAAI,GAAGH,QAAQ,CAACE,KAAK,GAAG,EAAT,CAAnB;;AACA,MAAGC,IAAI,IAAE,CAAT,EAAW;AACP,QAAGA,IAAI,IAAE,CAAT,EAAW;AACP,aAAOA,IAAI,GAAC,UAAZ;AACH;;AACD,WAAOA,IAAI,GAAC,WAAZ;AACH,GALD,MAKM,IAAGD,KAAK,IAAE,CAAV,EAAY;AACd,QAAGA,KAAK,IAAE,CAAV,EAAY;AACR,aAAO,cAAP;AACH;;AACD,WAAOA,KAAK,GAAC,YAAb;AACH,GALK,MAKA,IAAGD,OAAO,IAAE,CAAZ,EAAc;AAChB,QAAGA,OAAO,IAAE,CAAZ,EAAc;AACV,aAAQ,gBAAR;AACH;;AACD,WAAOA,OAAO,GAAE,cAAhB;AACH,GALK,MAKD;AACD,WAAO,wBAAP;AACH,GA3BwD,CA4BzD;AACA;AACA;AACA;AACA;AACA;;AACH,CAlCD;;AAoCAG,qBAASC,OAAT,CAAiBd,OAAO,CAACC,GAAR,CAAYc,SAA7B,EAAwC;AACpCC,EAAAA,gBAAgB,EAAE,KADkB;AAEpCC,EAAAA,eAAe,EAAE,IAFmB;AAGpCC,EAAAA,kBAAkB,EAAE,IAHgB;AAIpCC,EAAAA,cAAc,EAAE;AAJoB,CAAxC,EAMKC,IANL,CAMUC,OAAO,CAACC,GAAR,CAAY,2BAAZ,CANV,WAOW,UAAAC,GAAG;AAAA,SAAIF,OAAO,CAACC,GAAR,CAAYC,GAAZ,CAAJ;AAAA,CAPd;;AAaA,IAAMC,GAAG,GAAG,0BAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBC,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAJ,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AAEAD,GAAG,CAACK,GAAJ,CAAQ,wBAAO,KAAP,CAAR;AACAL,GAAG,CAACK,GAAJ,CAAQC,oBAAQC,IAAR,EAAR;AACAP,GAAG,CAACK,GAAJ,CAAQC,oBAAQE,UAAR,CAAmB;AAACC,EAAAA,QAAQ,EAAE;AAAX,CAAnB,CAAR;AACAT,GAAG,CAACK,GAAJ,CAAQ,+BAAR;AACAL,GAAG,CAACK,GAAJ,CAAQC,8BAAeJ,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAJ,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAaK,gBAAb;AACAV,GAAG,CAACK,GAAJ,CAAQ,QAAR,EAAkBM,iBAAlB;AACAX,GAAG,CAACK,GAAJ,CAAQ,OAAR,EAAiBO,gBAAjB,E,CAEA;;AACAZ,GAAG,CAACK,GAAJ,CAAQ,UAAUQ,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC9BA,EAAAA,IAAI,CAAC,4BAAY,GAAZ,CAAD,CAAJ;AACH,CAFD,E,CAIA;;AACAf,GAAG,CAACK,GAAJ,CAAQ,UAAUN,GAAV,EAAec,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AACnC;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAWC,OAAX,GAAqBlB,GAAG,CAACkB,OAAzB;AACAH,EAAAA,GAAG,CAACE,MAAJ,CAAWE,KAAX,GAAmBL,GAAG,CAACb,GAAJ,CAAQmB,GAAR,CAAY,KAAZ,MAAuB,aAAvB,GAAuCpB,GAAvC,GAA6C,EAAhE,CAHmC,CAKnC;;AACAe,EAAAA,GAAG,CAACM,MAAJ,CAAWrB,GAAG,CAACqB,MAAJ,IAAc,GAAzB;AACAN,EAAAA,GAAG,CAACO,MAAJ,CAAW,OAAX;AACH,CARD;AAUAC,MAAM,CAACC,OAAP,GAAiBvB,GAAjB","sourcesContent":["import createError from 'http-errors';\r\nimport express from 'express';\r\nimport path from 'path';\r\nimport cookieParser from 'cookie-parser';\r\nimport logger from 'morgan';\r\nimport mongoose from 'mongoose';\r\nimport handlebars from 'hbs';\r\nimport dotenv from 'dotenv';\r\ndotenv.config();\r\n\r\nhandlebars.registerHelper('URL',()=>{\r\n    if(process.env.NODE_ENV === 'devlopment'){\r\n        return 'http://localhost:3000'\r\n    }else{\r\n        return 'https://candor-app.herokuapp.com'\r\n    }\r\n})\r\nhandlebars.registerHelper(\"printDate\", function(date_before) {\r\n\r\n    let dateUTC = new Date(date_before);\r\n    let curr_date=new Date();\r\n    let diff= curr_date-dateUTC;\r\n\r\n    let  seconds = parseInt(diff / 1000);\r\n    let minutes = parseInt(seconds / 60);\r\n    let hours = parseInt(minutes / 60);\r\n    let days = parseInt(hours / 24);\r\n    if(days>=1){\r\n        if(days==1){\r\n            return days+\" day ago\"\r\n        }\r\n        return days+\" days ago\"\r\n    }else if(hours>=1){\r\n        if(hours==1){\r\n            return \"one hour ago\"\r\n        }\r\n        return hours+\" hours ago\"\r\n    }else if(minutes>=1){\r\n        if(minutes==1){\r\n            return  \"one minute ago\"\r\n        }\r\n        return minutes +\" minutes ago\"\r\n    }else{\r\n        return \"less than a minute ago\"\r\n    }\r\n    // return diff.toString();\r\n    // let dateIST = new Date(dateUTC);\r\n    // //date shifting for IST timezone (+5 hours and 30 minutes)\r\n    // dateIST.setHours(dateIST.getHours() + 5);\r\n    // dateIST.setMinutes(dateIST.getMinutes() + 30);\r\n    // return dateIST.toString();\r\n});\r\n\r\nmongoose.connect(process.env.mongo_uri, {\r\n    useFindAndModify: false,\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n    useCreateIndex: true\r\n})\r\n    .then(console.log('DB connected successfully'))\r\n    .catch(err => console.log(err));\r\n\r\nimport homeRouter from './routes/home';\r\nimport usersRouter from './routes/users';\r\nimport postRouter from './routes/post';\r\n\r\nconst app = express();\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'hbs');\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({extended: false}));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.use('/', homeRouter);\r\napp.use('/users', usersRouter);\r\napp.use('/post', postRouter);\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req, res, next) {\r\n    next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use(function (err, req, res, next) {\r\n    // set locals, only providing error in development\r\n    res.locals.message = err.message;\r\n    res.locals.error = req.app.get('env') === 'development' ? err : {};\r\n\r\n    // render the error page\r\n    res.status(err.status || 500);\r\n    res.render('error');\r\n});\r\n\r\nmodule.exports = app;\r\n"],"file":"app.js"}