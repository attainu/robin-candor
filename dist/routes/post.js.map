{"version":3,"sources":["../../src/routes/post.js"],"names":["router","express","Router","dotenv","config","authenticateToken","req","res","next","token","cookies","redirect","jwt","verify","process","env","jwt_key","err","user","status","send","msg","post","post_controller","createPost","createComment","get","renderPost","getdata","updateLike","getTrendingTags","module","exports"],"mappings":";;;;AAAA;;AAEA;;AACA;;AACA;;AAHA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AAIAC,mBAAOC,MAAP;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1C,MAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAY,UAAZ,CAAd;;AACA,MAAI,CAACD,KAAL,EAAY;AACR,WAAOF,GAAG,CAACI,QAAJ,CAAa,kBAAb,CAAP;AACH;;AACDC,2BAAIC,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,OAA9B,EAAuC,UAACC,GAAD,EAAMC,IAAN,EAAe;AAClD,QAAID,GAAJ,EAAS,OAAOV,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,GAAG,EAAE;AAAN,KAArB,CAAP;AACTf,IAAAA,GAAG,CAACY,IAAJ,GAAWA,IAAX;AACAV,IAAAA,IAAI;AACP,GAJD;AAKH,CAVD;;AAYAR,MAAM,CAACsB,IAAP,CAAY,UAAZ,EAAwBjB,iBAAxB,EAA2CkB,sBAAgBC,UAA3D;AACAxB,MAAM,CAACsB,IAAP,CAAY,aAAZ,EAA0BjB,iBAA1B,EAA4CkB,sBAAgBE,aAA5D;AACAzB,MAAM,CAAC0B,GAAP,CAAW,SAAX,EAAqBrB,iBAArB,EAAwCkB,sBAAgBI,UAAxD;AACA3B,MAAM,CAAC0B,GAAP,CAAW,UAAX,EAAuBH,sBAAgBK,OAAvC;AACA5B,MAAM,CAAC0B,GAAP,CAAW,OAAX,EAAmBrB,iBAAnB,EAAqCkB,sBAAgBM,UAArD;AACA7B,MAAM,CAAC0B,GAAP,CAAW,OAAX,EAAmBH,sBAAgBO,eAAnC;AACAC,MAAM,CAACC,OAAP,GAAiBhC,MAAjB","sourcesContent":["import express from 'express';\nconst router = express.Router();\nimport jwt from 'jsonwebtoken';\nimport {post_controller} from '../controller/post.controller';\nimport dotenv from 'dotenv';\ndotenv.config();\n\n\nconst authenticateToken = (req, res, next) => {\n    const token = req.cookies['awtToken'];\n    if (!token) {\n        return res.redirect('/users/loginPage');\n    }\n    jwt.verify(token, process.env.jwt_key, (err, user) => {\n        if (err) return res.status(403).send({msg: 'Unauthorized Forbidden'});\n        req.user = user;\n        next()\n    });\n};\n\nrouter.post('/addpost', authenticateToken, post_controller.createPost);\nrouter.post('/addcomment',authenticateToken,post_controller.createComment);\nrouter.get('/render',authenticateToken, post_controller.renderPost);\nrouter.get('/getdata', post_controller.getdata);\nrouter.get('/like',authenticateToken,post_controller.updateLike);\nrouter.get('/tags',post_controller.getTrendingTags);\nmodule.exports = router;\n"],"file":"post.js"}